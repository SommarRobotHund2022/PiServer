<head>
    <link rel="stylesheet" href="static/css/style.css">

    <script>
        function GET_CTRL(cmd) {
            
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.open( "GET", `/ctrl?cmd=${cmd}`, false ); // false for synchronous request
            xmlHttp.send( null );
        }

        function GET(url) {
            
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.open( "GET", url, false ); // false for synchronous request
            xmlHttp.send( null );
            return xmlHttp.responseText
        }

        var mySynFunc = (url) => {
            console.log("update!!")
            txt = GET(url)
            if (txt.includes('Movement detected') && txt.indexOf('Movement detected') < 10)
            {
                alert("!!MOVEMENT!!")
            }

            document.getElementById('log').innerHTML = txt
        }

        /* This id must be used to stop your function interval */
        var id = setInterval(mySynFunc, 5000, '/log');


        document.addEventListener('keydown', (e) => {
        switch (e.keyCode) {
            case 37:
                GET_CTRL("kcrL")
                break;
            case 38:
                GET_CTRL("kcrF")
                break;
            case 39:
                GET_CTRL("kcrR")
                break;
            case 40:
                GET_CTRL('kbalance');
                break;
    }
});
    </script>
</head>
<body>
    <iframe name="dummyframe" id="dummyframe" style="display: none;"></iframe>
    <div class="fbox">
        <div>
            <form action="/ctrl" method="get" target="dummyframe">
                <label id="write"> Write your command:</label><br><br>
                <div class="fbox">
                    <input type="text"  id="cmd" name="cmd" value="kpee"/>
                    <!-- <input type="submit" id="button" value="Submit"/> -->
                    <a href="/" class="bn5">Submit</a>
                    <a href="/" class="bn5" id="fullScreen">Full screen</a>
                    
                </div>

            </form>

            <input onchange="GET_CTRL(this.value)"  type="checkbox" id="toggle" class="toggleCheckbox" value="Submit AutoManuell" />
            <label for="toggle" class='toggleContainer'>
            <div>Auto</div>   
            <div>Manuell</div>
            </label>

            <input onchange="GET_CTRL(this.value)" type="checkbox" id="onOff" class="toggleCheckbox" value="TurnOnOff"/>
            <label for="onOff" class='toggleContainer'>
                <div>On</div>   
                <div>Off</div>
            </label>

                <div>
                    <input class="logBorder" id="log" readonly="readonly"></input>
                </div>

             
            
        </div>
        <div>
            <div class="camera">

                <iframe id="cameraframe" src="http://192.168.137.105:5000"></iframe>
            </div>    
        </div>
            
        
    </div>

    <div>
    <img class="bittle" src="static/pictures/petoi-bittle-robot-dog-stem-fun-1_1.jpg" alt="Picture of Bittle">
    </div>
    <div>
    <img class="speechBubble" src="static/pictures/BittleInstructionSpeechBubble.png" alt="Bittle speech bubble">
    </div>
    <div>
    <img class="SAAB" src="static/pictures/saab_logo.png" alt="Saab logo">
    </div>
    
    

    <section class="image-1">
    </section>

    
    
</body>
